{% extends 'base.html' %}
{% block title %}Projects{% endblock %}
{% block content %}

<!-- Background Effects -->
<div id="code-type-stream" class="background-task"></div>
<svg class="background-waves" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
  <path fill="#00f7ff" fill-opacity="0.015" d="M0,128L60,138.7C120,149,240,171,360,160C480,149,600,107,720,96C840,85,960,107,1080,112C1200,117,1320,107,1380,101.3L1440,96L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z"></path>
</svg>

<!-- Header -->
<div class="container my-5 text-center" data-aos="fade-down">
  <h2 class="fw-bold neon-text">My Key Projects</h2>
  <p class="lead text-muted">From real-time IoT systems to smart healthcare tools and VLSI designs.</p>
  <div class="mt-2">
    <i class="bi bi-cpu animated-icon mx-2"></i>
    <i class="bi bi-diagram-3 animated-icon mx-2"></i>
    <i class="bi bi-broadcast animated-icon mx-2"></i>
  </div>
</div>

<!-- üéÆ Drag & Drop Mini Game -->
<div class="container text-center my-5">
  <h4 class="neon-text mb-4">üéÆ Build the Project</h4>
  <p class="glow-yellow mb-3">Drag the correct tech stack to build a project!</p>
  <div class="d-flex justify-content-center flex-wrap gap-3">
    <div class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-tech="HTML">
      <p>Drop HTML here</p>
    </div>
    <div class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-tech="Arduino">
      <p>Drop Arduino here</p>
    </div>
  </div>
  <div class="mt-4 d-flex justify-content-center flex-wrap gap-3">
    <i class="bi bi-code-slash draggable-icon" draggable="true" ondragstart="drag(event)" id="HTML" title="HTML"></i>
    <i class="bi bi-usb-symbol draggable-icon" draggable="true" ondragstart="drag(event)" id="Arduino" title="Arduino"></i>
  </div>
  <p id="build-result" class="mt-4 fw-bold"></p>
</div>

<!-- üïπÔ∏è Joystick Project Navigator -->
<div class="container text-center my-5">
  <h4 class="neon-text mb-3">üïπÔ∏è Project Slider</h4>
  <div class="d-flex justify-content-center align-items-center gap-4">
    <button class="btn neon-btn" onclick="scrollProjects(-1)">‚óÄ</button>
    <div id="project-carousel" class="carousel-wrapper">
      {% for project in projects %}
        <div class="carousel-item {% if loop.first %}active{% endif %}">
          <h5 class="fw-bold">{{ project.title }}</h5>
          <p>{{ project.desc }}</p>
          {% if project.link %}
            <a href="{{ project.link }}" class="btn neon-btn btn-sm" target="_blank">View</a>
          {% endif %}
        </div>
      {% endfor %}
    </div>
    <button class="btn neon-btn" onclick="scrollProjects(1)">‚ñ∂</button>
  </div>
</div>

<!-- Categories -->
<div class="container text-center my-5">
  <h4 class="neon-text">Explore Project Categories</h4>
  <div class="category-links d-flex justify-content-center flex-wrap gap-3 mt-3">
    <a href="https://drive.google.com/drive/folders/1_rUWlcyZKedZIsY3UJWOWaE9VGGnTglh?usp=drive_link" target="_blank" class="btn neon-btn">IoT Projects</a>
    <a href="https://drive.google.com/drive/folders/1OGBVZXEuD9VAuFX9-1gDph3IFkVgFBNi?usp=sharing" target="_blank" class="btn neon-btn">VLSI Projects</a>
  </div>
</div>

<!-- CSS -->
<style>
  .background-task {
    position: fixed; top: 0; left: 0;
    font-family: monospace;
    font-size: 12px;
    opacity: 0.05;
    z-index: -1;
    pointer-events: none;
    white-space: pre;
    padding: 20px;
    color: #00ff88;
  }

  .background-waves {
    position: fixed;
    bottom: 0;
    width: 100%;
    z-index: -1;
    animation: waveFloat 20s infinite linear alternate;
  }

  @keyframes waveFloat {
    0% { transform: translateY(0); }
    100% { transform: translateY(-20px); }
  }

  .draggable-icon {
    font-size: 2rem;
    color: #00f7ff;
    cursor: grab;
    transition: transform 0.3s;
  }

  .draggable-icon:hover {
    transform: scale(1.2);
  }

  .drop-zone {
    border: 2px dashed #00f7ff;
    border-radius: 10px;
    width: 180px;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #121212;
    color: #00f7ff;
    font-weight: 600;
  }

  .carousel-wrapper {
    width: 260px;
    height: 180px;
    overflow: hidden;
    position: relative;
  }

  .carousel-item {
    display: none;
    text-align: center;
    padding: 1rem;
    background: #121212;
    border-radius: 10px;
    box-shadow: 0 0 10px #00f7ff;
    color: white;
  }

  .carousel-item.active {
    display: block;
    animation: fadeIn 0.5s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateX(-10px); }
    to { opacity: 1; transform: translateX(0); }
  }
</style>

<!-- JS -->
<script>
  // Typewriter Stream
  const lines = [
    "[2025-07-16 20:10] üöÄ Building SmartHealthMonitor_v4.2...",
    "[2025-07-16 20:11] ‚úÖ Compilation success...",
    "[2025-07-16 20:12] üì¶ Deploying to Render...",
    "[2025-07-16 20:13] üîÅ Checking I2C registers...",
    "[2025-07-16 20:14] üì° Connected to MQTT broker...",
    "[2025-07-16 20:15] ‚è≥ Monitoring patient vitals..."
  ];
  let i = 0;
  function loop() {
    const stream = document.getElementById("code-type-stream");
    stream.innerText = lines.slice(0, i + 1).join("\n");
    i = (i + 1) % lines.length;
    setTimeout(loop, 2000);
  }
  loop();

  // Drag & Drop Logic
  function allowDrop(ev) {
    ev.preventDefault();
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
  }

  function drop(ev) {
    ev.preventDefault();
    const data = ev.dataTransfer.getData("text");
    const zone = ev.target.closest(".drop-zone");
    if (zone.dataset.tech === data) {
      zone.innerHTML = `<span class="text-success">‚úÖ ${data} added!</span>`;
      document.getElementById("build-result").innerText = "üéâ Project Built Successfully!";
    } else {
      zone.innerHTML = `<span class="text-danger">‚ùå Wrong Tech!</span>`;
      document.getElementById("build-result").innerText = "üö´ Mismatch! Try again.";
    }
  }

  // Project Carousel
  let currentIndex = 0;
  function scrollProjects(step) {
    const items = document.querySelectorAll('.carousel-item');
    items[currentIndex].classList.remove("active");
    currentIndex = (currentIndex + step + items.length) % items.length;
    items[currentIndex].classList.add("active");
  }
</script>

{% endblock %}

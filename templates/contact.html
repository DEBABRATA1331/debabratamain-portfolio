{% extends 'base.html' %}

{% block title %}Contact{% endblock %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Contact Me</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Animate.css + Bootstrap Icons + AOS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css">
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

  <style>
    body {
      background: #0b0b0b;
      color: #e0f7fa;
      font-family: 'Segoe UI', sans-serif;
    }

    .neon-text {
      color: #00f7ff;
      text-shadow: 0 0 8px #00f7ff, 0 0 20px #00f7ff;
    }

    .glow-yellow {
      color: #ffeb3b;
      text-shadow: 0 0 5px #ffeb3b, 0 0 15px #ffeb3b;
    }

    .contact-section {
      max-width: 750px;
      margin: 4rem auto;
      padding: 2rem;
      background: #121212;
      border-left: 4px solid #00f7ff;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0, 247, 255, 0.15);
      position: relative;
    }

    input, textarea, select {
      background: #1c1c1c;
      color: #e0f7fa;
      border: 1px solid #00f7ff;
      border-radius: 6px;
      padding: 0.8rem;
      width: 100%;
      margin-bottom: 1rem;
      box-shadow: 0 0 10px rgba(0,247,255,0.15);
    }

    input::placeholder, textarea::placeholder {
      color: #88d8f7;
    }

    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #00f7ff;
      box-shadow: 0 0 12px #00f7ff;
    }

    .btn {
      background: transparent;
      border: 2px solid #00f7ff;
      color: #00f7ff;
      font-weight: 600;
      padding: 0.6rem 1.2rem;
      cursor: pointer;
      border-radius: 6px;
      transition: all 0.3s ease;
    }

    .btn:hover {
      background: #00f7ff;
      color: #000;
      box-shadow: 0 0 20px #00f7ff;
    }

    .typing-indicator {
      font-style: italic;
      color: #8efcff;
      margin-top: 0.5rem;
      animation: blink 1.2s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 1; }
    }

    .icon-links a {
      color: #00f7ff;
      font-size: 1.6rem;
      margin-right: 15px;
      transition: color 0.3s ease;
    }

    .icon-links a:hover {
      color: #ffeb3b;
    }
  </style>
</head>
<body>

  <section class="contact-section" data-aos="fade-up">
    <h2 class="neon-text animate__animated animate__fadeInDown">
      <i class="bi bi-chat-left-text-fill"></i> Contact Me
    </h2>

    <p class="typing-indicator">Debabrata is waiting to hear from you...</p>

    <form method="POST" class="mt-4" onsubmit="showSendingAnimation(event)">
      <input type="email" name="email" placeholder="Your Email" required>
      <textarea name="message" rows="5" placeholder="Your Message..." required></textarea>

      <label class="neon-text">Rate my CV (1-10):</label>
      <select name="rating" required>
        <option value="">Select</option>
        {% for i in range(1,11) %}
        <option value="{{ i }}">{{ i }}</option>
        {% endfor %}
      </select>

      <button type="submit" class="btn" id="sendBtn">Send Message</button>

      <div id="sendingStatus" style="display:none; margin-top: 10px;">
        <lottie-player src="https://lottie.host/3c8bb38d-5ad4-4292-9b25-d1cbbe6e2d4d/xGAcZDLxUl.json" background="transparent" speed="1" style="width: 80px; height: 80px; margin: auto;" loop autoplay></lottie-player>
        <p class="glow-yellow mt-2">Sending your message...</p>
      </div>
    </form>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="glow-yellow mt-3">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- Optional Contact Icons -->
    <div class="icon-links mt-4 text-center">
      <a href="mailto:debabrata.1331.ind@ieee.org" title="Email"><i class="bi bi-envelope"></i></a>
      <a href="https://wa.me/919999999999" title="WhatsApp"><i class="bi bi-whatsapp"></i></a>
      <a href="https://www.linkedin.com/in/debabrata-sahoo-ieee1331/" target="_blank" title="LinkedIn"><i class="bi bi-linkedin"></i></a>
    </div>
  </section>

  <p class="mt-4 text-center">
    Curious? <a href="{{ url_for('thank_you') }}" class="neon-text">See you here</a>
  </p>

  <!-- AOS Animation -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>AOS.init();</script>

  <!-- Submit Animation Script -->
  <script>
    function showSendingAnimation(event) {
      event.preventDefault(); // stop form submit to show animation
      document.getElementById('sendBtn').style.display = 'none';
      document.getElementById('sendingStatus').style.display = 'block';
      setTimeout(() => event.target.submit(), 2000); // then submit after delay
    }
  </script>

</body>
</html>
{% endblock %}
